<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
<div th:replace="~{fragments/navbar :: nav}"></div>
<h1 class="text-center" style="margin-top: 300px">회원가입</h1>
<form class="w-25 mx-auto" style="margin-top: 50px" th:object="${signup}" th:method="post" th:action="@{/signup}">
    <input type="text" class="form-control mb-2" placeholder="아이디" th:field="*{username}">
    <input type="password" class="form-control mb-2" placeholder="비밀번호" th:field="*{password}">
    <input type="text" class="form-control mb-2" placeholder="닉네임" th:field="*{nickname}">
    <button type="submit" class="btn btn-primary w-100 mb-2">회원가입</button>
</form>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('success')) {

            // Remove the 'success' parameter
            urlParams.delete('success');
            const newUrl = window.location.pathname + (urlParams.toString() ? '?' + urlParams.toString() : '');
            window.history.replaceState(null, '', newUrl);

            // After removing the parameter, show the alert
            alert('회원가입이 완료되었습니다.');

            // Redirect to the homepage
            window.location.href = '/';
        }
    });
</script>
</body>
</html>